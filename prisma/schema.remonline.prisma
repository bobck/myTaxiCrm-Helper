generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client-remonline"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_REMONLINE")
}
model CashboxTransaction {
  id                  Int     @id
  
  // 1. Foreign Key for Cashbox
  remonlineCashboxId  String  @map("remonline_cashbox_id")
  
  // 2. Relation Definition for Cashbox
  remonlineCashbox    RemonlineCashbox @relation(fields: [remonlineCashboxId], references: [id])

  value               Float
  direction           Int
  employeeId          Int     @map("employee_id")
  createdAt           Int     @map("created_at")
  description         String
  clientId            Int?    @map("client_id")
  relatedDocumentId   Int?    @map("related_document_id")
  relatedDocumentType Int?    @map("related_document_type")
  
  // 3. Foreign Key for CashFlowItem
  cashflowItemId      Int?    @map("cashflow_item_id")
  
  // 4. Relation Definition for CashFlowItem
  cashflowItem        CashFlowItem? @relation(fields: [cashflowItemId], references: [id])

  @@map("cashbox_transactions")
}

model CashFlowItem {
  id        Int    @id
  name      String
  direction Int

  // Inverse relation
  transactions CashboxTransaction[]

  @@map("cashflow_items")
}

model RemonlineCashbox {
  id                       String  @id
  lastTransactionCreatedAt Int?    @map("last_transaction_created_at")
  autoParkId               String  @map("auto_park_id")
  autoParkCashboxId        String  @map("auto_park_cashbox_id")
  defaultContatorId        String  @map("default_contator_id")
  usaContatorId            String? @map("usa_contator_id")
  scooterContatorId        String? @map("scooter_contator_id")

  // Inverse relation (Added this back)
  transactions             CashboxTransaction[]

  @@map("remonline_cashboxes")
}